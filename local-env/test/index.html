<html>
    <head>

    </head>
    <style src="style.css"></style>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1595.0.min.js"></script>
    
    <script>
        document.cookie = "name=value; domain=.localtest.me:4044; path=/";
        const config = new AWS.S3({
        endpoint: 'http://minio.localtest.me:9000', // for docker, http://minio:9000
        credentials: {
            accessKeyId: 'minio', // MINIO_ROOT_USER
            secretAccessKey: 'minio123', // MINIO_ROOT_PASSWORD
        },
        s3ForcePathStyle: true, // important
        });

        // list objects in a bucket
        config.listObjects({
        Bucket: 'test',
        }, (err, data) => {
        if (err) {
            console.log(err);
        } else {
            // add the objects to the div with id "output"
            data.Contents.forEach((object) => {
                var url = `http://gateway.localtest.me:4044/convert?file_id=${object.Key}`;
                //     "redirect_url": "https://dropbox.onlyoffice.com/convert?file_id=id%3AWA_OuPLikCcAAAAAAAAABg&require_role=personal"
                document.getElementById('output').innerHTML += `<ul><a href="${url}">${object.Key}</a></ul>`;
            });
        }
        }); 
    </script>
    
    <body>
        <h1>Test</h1>
        <p>Test</p>

        <div class="container">
            <div id="output"></div>
            <div id="iframeEditor"></div>
        </div>
    </body>
</html>